var _LOAD_SCRIPT_=function(b,e){if(!e){_LOAD_SCRIPT_DELAY_(b);return;}var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);};var _G_SCRIPT_lIST_=[];var _LOAD_SCRIPT_DELAY_=function(a){_G_SCRIPT_lIST_[_G_SCRIPT_lIST_.length]=a;};var _RUNNING_LOAD_SCRIPT_=function(){if(_G_SCRIPT_lIST_&&_G_SCRIPT_lIST_.length>0){var e=document.getElementsByTagName("head")[0];for(var b=0;b<_G_SCRIPT_lIST_.length;b++){var a=_G_SCRIPT_lIST_[b];var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src=a;e.appendChild(c);}}};if(document.attachEvent){window.attachEvent("onload",function(){_RUNNING_LOAD_SCRIPT_();});}else{window.addEventListener("load",function(a){_RUNNING_LOAD_SCRIPT_();},false);}function _LOAD_VIRTUAL_FUNCTION_(b,a){if(!a){window[b]=function(){};}else{window[b]=function(){return a;};}}function reSortDom(f,c){if(!f||!f.length){return[];}var g=[];for(var a=0,e=f.length;a<e;a++){if(f[a].nodeName=="#text"){continue;}g.push([f[a],f[a].innerHTML]);}if(g.length>(c?0:1)){var b=g[0][0].parentNode;g=g.sort(function(){return Math.random()-0.5;});b.innerHTML="";for(var a=0,e=g.length;a<e;a++){if(a==0&&c){M.addClass(g[a][0],c);}if(g[a][0].innerHTML==""){g[a][0].innerHTML=g[a][1];}b.appendChild(g[a][0]);}}return g;}function _SET_CHAT_DATA_READY_(a){window._MCHAT_DATA_READY_=a;_INIT_CHAT_EXPR_();}function _INIT_CHAT_EXPR_(){if(!window._MCHAT_DOM_READY_||!window._MCHAT_DATA_READY_){return;}var c=M.$("#DY_chat_expr_box");if(!c){return;}if(c.innerHTML==""){c.innerHTML=window._MCHAT_DATA_READY_.html_content;}var b=M.$("#chat_f1_main");var a=reSortDom(c.childNodes);if(b&&a.length){M.Animate(b,{height:"139px"},300);}if(a.length){M.Animate(c,{height:(26*a.length)+"px"},300);}}var M={lightBox:function(c,g,j){var f=document.createElement("div");var i=new Date();i="JS_lightBox_"+i.getTime().toString(36);f.className="lightBox";f.id=i;var e='<div class="htmls">'+c+"</div>";var b="";for(var a in g){b+='<button id="'+i+"_"+a+'">'+a+"</button>";}if(b){b='<div class="btns">'+b+"</div>";}e=j?e+b:'<div class="in">'+e+b+"</div>";f.innerHTML=e;document.body.appendChild(f);for(var a in g){if(g[a]=="close"){document.getElementById(i+"_"+a).onclick=function(){document.getElementById(i).style.display="none";};}else{if(typeof g[a]==="function"){document.getElementById(i+"_"+a).onclick=g[a];}}}M.lightBoxId=i;return f;},goExpr:function(e,a,c){if(!e){return;}if(e=="index.html"){M.setCookie("curr_page_sn","index",5,"");M.setCookie("region_id",0,5,"");if(c==2){location.href="/expr.html";}else{location.href="/";}}else{M.setCookie("curr_page_sn",0,5,"");M.setCookie("region_id",a,5,"");if(c==1){location.href="/"+e+"/blog.html";}else{if(c==2){location.href="/"+e+"/expr.html";}else{var b=location.href.split("/");if(b[b.length-1]=="expr.html"){location.href="/"+e+"/expr.html";}else{location.href="/"+e+"/";}}}}},setCookie:function(a,e,c,b){c=c||360;b=b?";domain="+b:";domain=";var f=new Date();f.setTime(f.getTime()+parseInt(c)*24*60*60*1000);document.cookie=a+"="+encodeURIComponent(e)+(c=="session"?"":";expires="+f.toGMTString())+b+";path=/";},getCookie:function(a){var f;if(document.cookie&&document.cookie!=""){var e=document.cookie.split(";");var g=e.length;for(var c=0;c<g;c++){var b=e[c].replace(/(^\s*)|(\s*$)/g,"");if(b.substring(0,a.length+1)==(a+"=")){f=decodeURIComponent(b.substring(a.length+1));break;}}}return f;},showLoginBox:function(b,a){if(M.getCookie("meilele_login")=="1"&&M.getCookie("ECS[username]")){if(typeof b=="function"){b();}return;}M.showLoginBox.dom=document.getElementById("_MLL_LOGIN_BOX");if(!M.showLoginBox.dom){M.showLoginBox.dom=document.createElement("div");document.body.appendChild(M.showLoginBox.dom);M.showLoginBox.dom.className="MLL_LOGIN_BOX";M.showLoginBox.dom.innerHTML='<div style="text-align:center; padding-top:30px;"><span style="padding:20px; background:#fff;border:1px solid #ccc;border-radius:5px;">载入中，请稍候...</span></div>';M.showLoginBox.dom.setAttribute("id","_MLL_LOGIN_BOX");M.showLoginBox.dom.style.width="400px";}else{M.showLoginBox.dom.style.display="block";}M.showLoginBox.callback=b;if(M.showLoginBox.loginScript&&loginBox){loginBox.dom.style.display="block";if(a=="reg"){toggleToRegiste();}else{toggleToLogin();}}else{window._LoginType_=a;M.showLoginBox.loginScript=document.createElement("script");M.showLoginBox.loginScript.type="text/javascript";M.showLoginBox.loginScript.src="";document.getElementsByTagName("head")[0].appendChild(M.showLoginBox.loginScript);}},searchSuggest:{init:function(c,b){var a=this;a.data=a.data||{};a.data.obj=c;b=b||window.event;a.data.event=b;a.data.v=c.value;a.data.l=document.getElementById("JS_search_suggest");if(a.data.show&&(b.keyCode==38||b.keyCode==40)){a.data.focusOn=a.data.focusOn||0;a.data.arrow=b.keyCode-39;a.changeFocus();return false;}else{if(a.data.v==""){a.data.show=false;a.data.l.style.display="none";}else{a.get();}}},changeFocus:function(){var c=this;var b=c.data.focusOn+c.data.arrow;if(b>=0&&b<=c.data.jsonLength){var e=c.data.l.childNodes[b-1];for(var a=0;a<c.data.l.childNodes.length;a++){c.data.l.childNodes[a].className="";}if(!c.data.focusOn){c.data.oldValue=c.data.obj.value;}if(b>0){c.data.obj.value=e.innerHTML;e.className="current";}if(b==0){c.data.obj.value=c.data.oldValue;}c.data.focusOn=b;}},get:function(){var a=this;a.data.cache=a.data.cache||{};if(a.data.timer){clearTimeout(a.data.timer);}a.data.timer=setTimeout(function(){a.data.v=a.data.obj.value;if(a.data.v==""){return false;}if(a.data.cache[a.data.v]){a.response(a.data.cache[a.data.v]);}else{M.ajax({url:"/search_suggest.html?act=search_suggest&k="+encodeURIComponent(a.data.v),dataType:"json",cache:true,success:function(b){a.data.cache[a.data.v]=b;a.response(b);}});}},500);},response:function(b){var f=this;if(b&&b.length){f.data.focusOn=0;f.data.jsonLength=b.length;var e="";for(var a=0;a<b.length;a++){e+='<a href="/keywords/'+b[a].pinyin+'/" target="_blank" onmouseout="this.className=\'\'">'+b[a].keyword+"</a>";}f.data.show=true;f.data.l.innerHTML=e;f.data.l.style.display="block";if(!f.data.blinkEvent){var c=document.body;if(c.addEventListener){c.addEventListener("click",function(){f.hide();},false);}else{if(c.attachEvent){c.attachEvent("onclick",function(){f.hide();});}}f.data.blinkEvent=true;}}else{f.hide();}},hide:function(){var a=this;a.data.l.style.display="none";a.data.show=false;}},ajax:function(a){var b=this;return new b.ajax.prototype.init(a);},sendSms:function(a){return new this.sendSms.prototype.init(a);}};M.ajax.prototype={init:function(b){var e=this;e.type=b.type||"GET";e.dataType=b.dataType||"html";e.success=b.success||false;e.error=b.error||false;e.url=b.url||"";e.data=b.data||"";e.cache=b.cache===false?false:true;e.request=e.getRequest();if(e.type=="GET"){var f=(e.url.indexOf("?")>-1)?"&":"?";e.url+=e.data?(f+e.data):"";}if(!e.cache){var a=new Date();a=a.getTime();var f=(e.url.indexOf("?")>-1)?"&":"?";e.url+=f+"_="+a;}if(e.request){var c=e.request;c.onreadystatechange=e.bindFunction(e.stateChange,e);c.open(e.type,e.url,true);if(e.type=="POST"){c.setRequestHeader("Content-type","application/x-www-form-urlencoded");}c.send(e.data);}},getRequest:function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){return new XMLHttpRequest();}}return false;},bindFunction:function(b,a){return function(){return b.apply(a,[a]);};},stateChange:function(object){that=this;if(that.request.readyState==4){if(that.request.status==200){if(that.dataType=="json"){try{if(typeof JSON==="object"){var json=JSON.parse(that.request.responseText);}else{var json=eval("("+that.request.responseText+")");}}catch(e){if(that.error){that.error();return false;}}if(typeof json==="object"){if(that.success){that.success(json,that.request.status,that.request);return true;}}else{if(that.error){that.error();return false;}}}else{if(that.success){that.success(that.request.responseText,that.request.status,that.request);return true;}}}else{if(that.error){that.error(that.request);return false;}}}}};M.ajax.prototype.init.prototype=M.ajax.prototype;M.sendSms.prototype={constructor:M.sendSms,init:function(a){if(!a){return;}if(M._currentSendSmsBox){M._currentSendSmsBox.remove();}this.exprId=a;this.dom=this.show();M._currentSendSmsBox=this;this.msgBox=M.$("#_JS_sndSms_msg_box_");this.inpt=M.$("#_JS_sndSms_input_");},show:function(){var b="";var a="请输入您的手机号";return M.lightBox('<div style="width:300px;height:155px;border:1px solid #c1bfc0;box-shadow:1px 1px 1px efefef;background:#fff;margin:0px auto;"><div style="background:url('+b+') 0px 0px repeat-x;height:22px;padding-right:10px;padding-top:8px;border-bottom:1px solid #f2f2f2" class="r"><a href="javascript:;" onclick="M._currentSendSmsBox.remove();return !1;"><span style="display:inline-block;background:url('+b+') 0px -60px no-repeat;width:14px;height:14px;vertical-align:top;margin-right:3px;"></span>关闭</a></div><div style="height:52px;padding-top:27px;padding-left:20px;"><input style="width:170px;height:28px;border:1px solid #c7c7c7;padding:0;margin:0;vertical-align:top;color:#555;padding-left:5px;line-height:28px;" value="'+a+'" onfocus="if(this.value==\''+a+'\')this.value=\'\'"  onkeypress="M._currentSendSmsBox.keyPress();" id="_JS_sndSms_input_" /><input type="button" style="height:30px;background:url('+b+') 0px -30px;width:71px;color:#fff;text-align:center;border:none;margin:0;padding:0;vertical-align:top;margin-left:5px;" class="pointer" onclick="M._currentSendSmsBox.send();" value="免费发送" /></div><div style="color:#454545;padding-left:20px;" id="_JS_sndSms_msg_box_"></div></div>',{},true);},remove:function(){if(M._currentSendSmsBox&&M._currentSendSmsBox.dom){document.body.removeChild(M._currentSendSmsBox.dom);M._currentSendSmsBox=null;}},send:function(){var a=parseInt(M._currentSendSmsBox.inpt.value.replace(/\D/g,""));M._currentSendSmsBox.inpt.value=a||"";if(!a){M._currentSendSmsBox.msg("请输入正确手机号码。");return;}M._currentSendSmsBox.msg("发送中...");M.ajax({url:"/ajax_ajax.html?act=send_expr_message&expr_id="+M._currentSendSmsBox.exprId+"&mobile="+a,dataType:"json",success:function(b){if(b.msg=="发送成功"){M._currentSendSmsBox.msg(b.msg+"，本窗口将在2秒后自动关闭。",true);setTimeout(M._currentSendSmsBox.remove,4000);}else{M._currentSendSmsBox.msg(b.msg);}},error:function(){M._currentSendSmsBox.msg("发送失败");}});},msg:function(b,c){var a=c?"-14":"-32";b='<span style="display:inline-block;vertical-align:middle;width:18px;height:18px;background:url() '+a+'px -60px;margin-right:3px;"></span><span style="vertical-align:middle">'+b+"</span>";M._currentSendSmsBox.msgBox.innerHTML=b;},keyPress:function(a){a=a||window.event;if(a.keyCode==13){M._currentSendSmsBox.send();}}};M.sendSms.prototype.init.prototype=M.sendSms.prototype;function MLLBanner(lists,setting){if(!(lists&&lists.length)){return false;}var banner=[],doc=document,tmpId=(new Date()).getTime().toString(36),length=lists.length,now,next,over,outStep,inStep,countList=[],focus=true,must=false;var defaultSetting={width:980,height:60,domId:"JS_banner",delay:6000,inTimer:600,outTimer:300,stepTimer:40};var timeDefaultSetting={content:"$D天 $H:$I:$S",style_position:"absolute","style_margin-left":"600px","style_margin-top":"15px","style_font-size:":"16px"};setting=mergeSetting(defaultSetting,setting);var bannerDom=doc.getElementById(setting.domId);if(!bannerDom){return false;}bannerDom.style.display="block";outStep=100/(setting.outTimer/setting.stepTimer);inStep=100/(setting.inTimer/setting.stepTimer);var Banner=function(info,key){this.info=info||[];this.key=key;this.opacity=0;this.createHTML();};Banner.prototype={createHTML:function(){this.html='<div id="JS_banner_box_'+this.key+"_"+tmpId+'" style="display:none;position:absolute;background:url(images/loading.gif) center center no-repeat;filter:alpha(opacity=100);">';if(this.info[3]){try{eval("this.info[3]="+this.info[3]);}catch(e){}if(this.info[3]&&typeof this.info[3]=="object"&&this.info[3].endTime){this.timeSetting=mergeSetting(timeDefaultSetting,this.info[3]);this.timeSetting.timeLeft=toSecond(this.timeSetting.endTime)-(new Date()).getTime();countList.push([this.key,this.timeSetting]);this.html+='<div style="'+styleToString(this.timeSetting)+'" id="JS_banner_time_'+this.key+"_"+tmpId+'"></div>';}}this.html+='<a id="JS_banner_link_'+this.key+"_"+tmpId+'" href="'+(this.info[1]||"/")+'" title="'+(this.info[2]||"")+'" target="_blank"><img id="JS_banner_img_'+this.key+"_"+tmpId+'" src="'+this.info[0]+'" width="'+setting.width+'px" height="'+setting.height+'px"></a>';this.html+="</div>";},changeOpacity:function(to){if(this.box.filters){this.box.filters.alpha.opacity=to;}else{this.box.style.opacity=to/100;}if(to<=0){this.box.style.display="none";}else{this.box.style.display="block";}this.opacity=to;}};function mergeSetting(defaultSetting,setting){setting=setting||{};for(var k in defaultSetting){if(setting[k]===undefined){setting[k]=defaultSetting[k];}}return setting;}function switchBanner(){if(over&&!must){return;}if(!focus&&!must){return;}next=(now+1)%length;if(banner[now].opacity>0){banner[now].changeOpacity(banner[now].opacity-outStep);must=true;setTimeout(switchBanner,setting.stepTimer);}else{if(banner[next].opacity<100){banner[next].changeOpacity(banner[next].opacity+outStep);must=true;setTimeout(switchBanner,setting.stepTimer);}else{must=false;now=next;}}}function styleToString(style){var r=[];for(var key in style){if(key.indexOf("style_")===0){r.push(key.replace("style_","")+":"+style[key]);}}return r.join(";");}function toSecond(string){var t=string.split("-").join(",");eval("var d = new Date('"+t+"')");return d.getTime();}function count(){for(var k=0,kk=countList.length;k<kk;k++){var c=countList[k];if(c&&banner[c[0]]&&banner[c[0]].time){var dom=banner[c[0]].time;c[1].timeLeft-=1000;if(c[1].timeLeft<=0){c[1].timeLeft=0;}dom.innerHTML=fixTime(c[1]);}}}function fixTime(time){var sec=parseInt(time.timeLeft/1000);if(sec<0){sec=0;}var s=sec%60;if(s<10){s="0"+s;}var m=parseInt(sec%3600/60);if(m<10){m="0"+m;}var h=parseInt(sec%(3600*24)/3600);if(h<10){h="0"+h;}var d=parseInt(sec/(3600*24));if(time.content.indexOf("$D")<0){h=(d*24)-0+(h-0);}return time.content.replace("$D",d).replace("$H",h).replace("$I",m).replace("$S",s);}var h="";for(var k=0,kk=length;k<kk;k++){banner[k]=new Banner(lists[k],k);h+=banner[k].html;}bannerDom.innerHTML=h;bannerDom.onmouseover=function(){over=true;};bannerDom.onmouseout=function(){over=false;};for(var k=0,kk=length;k<kk;k++){banner[k].box=doc.getElementById("JS_banner_box_"+k+"_"+tmpId);banner[k].link=doc.getElementById("JS_banner_link_"+k+"_"+tmpId);banner[k].img=doc.getElementById("JS_banner_img_"+k+"_"+tmpId);banner[k].time=doc.getElementById("JS_banner_time_"+k+"_"+tmpId);if(!k){banner[k].opacity=100;banner[k].box.style.display="block";now=k;}}if(countList.length){setInterval(count,1000);}if(length>1){setInterval(switchBanner,setting.delay);}}(function(e,c,g){g=g||{};var f,a=document.body,b=c.getElementsByTagName("head")[0];g.typeOf=function(h){var i=typeof h;if(i=="object"&&i!="string"&&h.length){i="array";}return i;};g.extend=function(j,i){j=j||{};i=i||{};for(var h in i){j[h]=i[h];}return j;};g.addHandler=function(l,k,j,i){function h(n){var m=n?n:window.event;m.target=n.target||n.srcElement;return j.apply(i||this,arguments);}l.eventHash=l.eventHash||{};(l.eventHash[k]=l.eventHash[k]||[]).push({name:k,handler:j,fn:h,scope:i});if(l.addEventListener){l.addEventListener(k,h,false);}else{if(l.attachEvent){l.attachEvent("on"+k,h);}else{l["on"+k]=h;}}};g.removeHandler=function(n,m,l,k){n.eventHash=n.eventHash||{};var j=n.eventHash[m]||[],i=j.length;if(i>0){for(;i--;){var h=j[i];if(h.name==m&&h.handler===l&&h.scope===k){if(n.removeEventListener){n.removeEventListener(m,h.fn,false);}else{if(n.detachEvent){n.detachEvent("on"+m,h.fn);}else{n["on"+m]=null;}}j.splice(i,1);break;}}}};g.$=function(h,k){if(!k){k=document;}if(g.typeOf(k)==="string"){k=(g.$(k)||document);}if(h.indexOf("#")==0){var m=document.getElementById(h.substr(1));if(m&&m.nodeName){m.length=1;}}else{if(h.indexOf(".")==0){var m=[],l=k.getElementsByTagName("*");for(var j=0;j<l.length;j++){if(l[j].className.indexOf(h.substr(1))>-1){m.push(l[j]);}}}else{var m=k.getElementsByTagName(h);}}return m;};g.addClass=function(j,l){if(j&&j.className){var m=j.className.split(" ");}if(m&&m.length){for(var h=0,i=m.length;h<i;h++){if(m[h]===l){return;}}}j.className=j.className+" "+l;return j;};g.removeClass=function(i,j){if(typeof i.className==="string"){var h=new RegExp("(\\s*)"+j,"g");i.className=i.className.replace(h,"");}return i;};g.bindFunction=function(j,h){var i=Array.prototype.slice.call(arguments).slice(2);return function(){return h.apply(j,i.concat(Array.prototype.slice.call(arguments)));};};})(window,document,window.M);window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60);};})();M.Animate=function(c,a,b,f,e){return new M.Animate.prototype.init(c,a,b,f,e);};M.Animate.prototype={init:function(e,b,c,g,f){this.dom=e;this.time=c||300;this.preTime=10;this.list=b;this.callback=f;this.tweenType=g||"easeInOut";this._d=Math.ceil(this.time/this.preTime);this._t=0;this._c={};this._b={};for(var a in this.list){this._b[a]=parseFloat(this.currentStyle()[a])||0;this._c[a]=parseFloat(this.list[a])-this._b[a];}if(this.dom._animate){this.dom._animate.stop();}this.run();this.dom._animate=this;},currentStyle:function(){var a=this.dom;return a.currentStyle||document.defaultView.getComputedStyle(a,null);},run:function(){if(this._t>this._d){if(M.typeOf(this.callback)=="function"){this.callback();}return;}else{if(this._stop){return;}else{for(var a in this.list){var b=this.tween[this.tweenType](this._t,this._b[a],this._c[a],this._d)+(("opacity|".indexOf(a+"|")>-1)?"":"px");this.dom.style[a]=b;}this._t++;requestAnimFrame(M.bindFunction(this,this.run),this.preTime);}}},stop:function(){this._stop=true;},tween:{easeIn:function(e,a,g,f){return g*(e/=f)*e*e*e+a;},easeOut:function(e,a,g,f){return -g*((e=e/f-1)*e*e*e-1)+a;},easeInOut:function(e,a,g,f){if((e/=f/2)<1){return g/2*e*e*e*e+a;}return -g/2*((e-=2)*e*e*e-2)+a;},linear:function(e,a,g,f){return g*e/f+a;}}};M.Animate.prototype.init.prototype=M.Animate.prototype;